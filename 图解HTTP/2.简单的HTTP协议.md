## 简单的HTTP协议

1. [HTTP协议用于客户端和服务器端之间的通信](#1)
2. [通过请求和响应的交换达成通信](#2)
3. [HTTP是不保存状态的协议](#3)
4. [请求URI定位资源](#4)
5. [告知服务器意图的HTTP方法](#5)
6. [使用方法下达命令](#6)
7. [持久连接节省通信量](#7)
8. [使用Cookie的状态管理](#8)

#### <a name="1">1. HTTP协议用于客户端和服务器端之间的通信</a>

  HTTP 协议和 TCP/IP 协议族内的其他众多的协议相同，用于客户端和服务器之间的通信。请求访问文本或图像等资源的一端称为客户端，而提供资源响应的一端称为服务器端。

#### <a name="2">2. 通过请求和响应的交换达成通信</a>

  HTTP 协议规定，请求从客户端发出，最后服务器端响应该请求并返回。换句话说，肯定是先从客户端开始建立通信的，服务器端在没有接收到请求之前不会发送响应。

  * 在客户端应用层向服务器发起一个请求后，产生HTTP请求报文（数据）。

    请求报文是由请求方法、请求 URI、协议版本、可选的请求首部字段和内容实体构成的。

  * 接收到请求的服务器，会将请求内容的处理结果以响应的形式返回

    响应报文基本上由协议版本、状态码（表示请求成功或失败的数字代码）、用以解释状态码的原因短语、可选的响应首部字段以及实体主体构成。


#### <a name="3">3. HTTP是不保存状态的协议</a>

  HTTP 是一种不保存状态，即无状态（stateless）协议。HTTP 协议自身不对请求和响应之间的通信状态进行保存。也就是说在 HTTP 这个级别，协议对于发送过的请求或响应都不做持久化处理。

  使用 HTTP 协议，每当有新的请求发送时，就会有对应的新响应产生。协议本身并不保留之前一切的请求或响应报文的信息。这是为了更快地处理大量事务，确保协议的可伸缩性，而特意把 HTTP 协议设计成如此简单的。

  随着Web不断发展，有些场景需要持久保存用户状态，例如用户的登录状态。于是引入了 Cookie 技术。有了 Cookie 再用 HTTP 协议通信，就可以管理状态了。


#### <a name="4">4. 请求URI定位资源</a>

  HTTP 协议使用 URI 定位互联网上的资源。正是因为 URI 的特定功能，在互联网上任意位置的资源都能访问到。


#### <a name="5">5. 告知服务器意图的HTTP方法</a>

  * GET：获取资源

    GET 方法用来请求访问已被 URI 识别的资源。指定的资源经服务器端解析后返回响应内容。也就是说，如果请求的资源是文本，那就保持原样返回；如果是像 CGI（Common Gateway Interface，通用网关接口）那样的程序，则返回经过执行后的输出结果。

  * POST：传输实体主体
  * PUT：传输文件
  * HEAD：获得报文首部
  * DELETE：删除文件
  * OPTIONS：询问支持的方法
  * TRACE：追踪路径
  * CONNECT：要求用隧道协议连接代理

    CONNECT 方法要求在与代理服务器通信时建立隧道，实现用隧道协议进行 TCP 通信。主要使用 SSL（Secure Sockets Layer，安全套接层）和 TLS（Transport Layer Security，传输层安全）协议把通信内容加密后经网络隧道传输。

#### <a name="6">6. 使用方法下达命令</a>

  向请求 URI 指定的资源发送请求报文时，采用称为方法的命令。

  方法的作用在于，可以指定请求的资源按期望产生某种行为。方法中有 GET、POST 和 HEAD 等。

#### <a name="7">7. 持久连接节省通信量</a>

  * 持久连接：为了解决每次HTTP通信就断开一次TCP连接，在多请求场景造成的大通信量开销，产生此方案，**只要任意一端没有明确提出断开连接，则保持TCP连接状态**。

    持久连接的好处在于减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。另外，减少开销的那部分时间，使 HTTP 请求和响应能够更早地结束，这样 Web 页面的显示速度也就相应提高了。
  
  * 管线化（pipelining）：持久连接使得多数请求以管线化（pipelining）方式发送成为可能，这样就能够做到同时并行发送多个请求，而不需要一个接一个地等待响应了。


#### <a name="8">8. 使用Cookie的状态管理</a>

  Cookie 技术通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态。

  Cookie 会根据从服务器端发送的响应报文内的一个叫做 Set-Cookie 的首部字段信息，通知客户端保存 Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送出去。
